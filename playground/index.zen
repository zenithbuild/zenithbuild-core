<html>
  <head>
 <title>
 Zenith
 </title> 
  </head>
  <body onload="initLog">
    <div class="container">
      <h1 class="title">Zenith Phase 2 Tests</h1>

      <div class="test-section">
        <h2>Phase 2: Reactive Text Bindings</h2>

        <div class="test-group">
          <h3>Count: { count }</h3>
          <button type="button" onclick="incrementCount">Increment</button>
          <button type="button" onclick="decrementCount">Decrement</button>
          <span class="test-desc">Text binding updates automatically when count changes</span>
        </div>
      </div>

      <div class="test-section">
        <h2>Phase 3: State Mutation (Inline Event Handlers)</h2>

        <div class="test-group">
          <h3>Inline Counter: { counter }</h3>
          <button type="button" onclick="() => counter++">Increment Counter</button>
          <button type="button" onclick="() => counter--">Decrement Counter</button>
          <span class="test-desc">State mutation using inline arrow functions in event handlers</span>
        </div>

        <div class="test-group">
          <h3>Text Input Binding</h3>
          <input
            type="text"
            oninput="(e) => inputValue = e.target.value"
            placeholder="Type to update state"
          />
          <div class="display-box">
            Current value: "{ inputValue }"
          </div>
          <span class="test-desc">Text input updates state via inline event handler</span>
        </div>
      </div>

      <div class="test-section">
        <h2>Compiler: State Declarations</h2>

        <div class="test-group">
          <h3>Multiple State Declarations</h3>
          <div class="display-box">
            <p>Count: { count }</p>
            <p>Message: { message }</p>
            <p>Score: { score }</p>
          </div>
          <button type="button" onclick="testStateDeclarations">Test State Declarations</button>
          <span class="test-desc">Compiler registers state declarations at compile time</span>
        </div>

        <div class="test-group">
          <h3>State Declaration Info</h3>
          <div id="state-declaration-info" class="display-box">
            <p><strong>Declared States:</strong></p>
            <ul id="state-list"></ul>
          </div>
          <span class="test-desc">Shows all state variables registered by the compiler</span>
        </div>
      </div>

      <div class="test-section">
        <h2>Event Handlers & DOM Helpers</h2>

        <div class="test-group">
          <button type="button" onclick="sayHi">
            Test addClass/removeClass
          </button>
          <span class="test-desc">Adds 'clicked' class, removes after 1s</span>
        </div>

        <div class="test-group">
          <input
            type="text"
            oninput="updateValue"
            placeholder="Type to test setText()"
          />
          <div id="value-display" class="display-box">
            Current value: (none)
          </div>
        </div>

        <div class="test-group">
          <form onsubmit="submitForm">
            <button type="submit">Test hide/show (form)</button>
          </form>
          <span class="test-desc">Hides form, shows after 2s</span>
        </div>

        <div class="test-group">
          <button type="button" onclick="toggleVisibility">
            Toggle Visibility
          </button>
          <div id="toggle-target" class="display-box">
            This element can be shown/hidden
          </div>
        </div>

        <div class="test-group">
          <button type="button" onclick="updateHTML">Test setHTML()</button>
          <div id="html-display" class="display-box" data-count="0">
            Click to update HTML content
          </div>
        </div>

        <div class="test-group">
          <button type="button" onclick="toggleClass">Toggle Class</button>
          <div id="class-target" class="display-box">
            This element's class can be toggled
          </div>
        </div>
      </div>

      <div class="log-section">
        <h2>Test Log</h2>
        <div id="test-log" class="log-box"></div>
      </div>
    </div>

    <style>
      body {
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        margin: 0;
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        min-height: 100vh;
      }

      .title {
        font-size: 48px;
        font-weight: 900;
        letter-spacing: 4px;
        color: white;
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .test-section {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .test-section h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
      }

      .test-group {
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #667eea;
      }

      .test-desc {
        display: block;
        font-size: 12px;
        color: #666;
        margin-top: 8px;
        font-style: italic;
      }

      button {
        background: #667eea;
        color: white;
        padding: 10px 20px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: background 0.2s;
      }

      button:hover {
        background: #5568d3;
      }

      button.clicked {
        background: #48bb78;
        transform: scale(1.05);
      }

      input {
        padding: 10px;
        border: 2px solid #e2e8f0;
        border-radius: 6px;
        font-size: 14px;
        width: 100%;
        max-width: 400px;
      }

      input:focus {
        outline: none;
        border-color: #667eea;
      }

      .display-box {
        margin-top: 10px;
        padding: 12px;
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 6px;
        min-height: 40px;
        color: #333;
      }

      .display-box.highlight {
        background: #fef3c7;
        border-color: #f59e0b;
        font-weight: 600;
      }

      .log-section {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .log-section h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
      }

      .log-box {
        background: #1a202c;
        color: #a0aec0;
        padding: 15px;
        border-radius: 6px;
        max-height: 300px;
        overflow-y: auto;
        font-family: 'Monaco', 'Menlo', monospace;
        font-size: 12px;
        line-height: 1.6;
      }

      .log-box div {
        margin-bottom: 4px;
        padding: 2px 0;
      }

      .log-box div:last-child {
        color: #48bb78;
        font-weight: 600;
      }
    </style>
<script>
      /* 
       * Zenith Compiler: State Declarations
       * 
       * The 'state' keyword is custom Zenith syntax processed at compile time.
       * Linter errors for 'state' are expected and can be safely ignored.
       * The compiler removes these declarations from the output and generates
       * proper runtime code. See compiler/parse.ts for implementation.
       */
      
      // Test logging helper
      function log(message) {
        const logEl = document.getElementById('test-log');
        if (logEl) {
          const time = new Date().toLocaleTimeString();
          logEl.setHTML(logEl.innerHTML + `<div>[${time}] ${message}</div>`);
          logEl.scrollTop = logEl.scrollHeight;
        }
        console.log(message);
      }

      // Test: addClass and removeClass
      function sayHi(event, el) {
        el.addClass('clicked');
        log("âœ“ addClass('clicked') - Button clicked!");
        setTimeout(() => {
          el.removeClass('clicked');
          log("âœ“ removeClass('clicked') - Class removed after 1s");
        }, 1000);
      }

      // Test: setText
      function updateValue(event, el) {
        const value = el.value;
        const displayEl = document.getElementById('value-display');
        if (displayEl) {
          displayEl.setText(`Current value: "${value}"`);
          log(`âœ“ setText() - Input value: "${value}"`);
        }
      }

      // Test: hide
      function submitForm(event, el) {
        event.preventDefault();
        log('âœ“ hide() - Form submitted, hiding form...');
        el.hide();
        setTimeout(() => {
          el.show();
          log('âœ“ show() - Form shown again after 2s');
        }, 2000);
      }

      // Test: show/hide toggle
      function toggleVisibility(event, el) {
        const targetEl = document.getElementById('toggle-target');
        if (targetEl) {
          if (targetEl.style.display === 'none') {
            targetEl.show();
            log('âœ“ show() - Toggle target is now visible');
          } else {
            targetEl.hide();
            log('âœ“ hide() - Toggle target is now hidden');
          }
        }
      }

      // Test: setHTML
      function updateHTML(event, el) {
        const htmlEl = document.getElementById('html-display');
        if (htmlEl) {
          const count = parseInt(htmlEl.getAttribute('data-count') || '0') + 1;
          htmlEl.setAttribute('data-count', count);
          htmlEl.setHTML(
            `Updated <strong>${count}</strong> time${count !== 1 ? 's' : ''} with <em>setHTML()</em>`
          );
          log(`âœ“ setHTML() - Updated HTML content (count: ${count})`);
        }
      }

      // Test: addClass/removeClass toggle
      function toggleClass(event, el) {
        const targetEl = document.getElementById('class-target');
        if (targetEl) {
          if (targetEl.classList.contains('highlight')) {
            targetEl.removeClass('highlight');
            log("âœ“ removeClass('highlight') - Removed highlight class");
          } else {
            targetEl.addClass('highlight');
            log("âœ“ addClass('highlight') - Added highlight class");
          }
        }
      }

      // Phase 2: Reactive text bindings test handlers
      function incrementCount(event, el) {
        count++;
      }

      function decrementCount(event, el) {
        count--;
      }

      // Test: State declarations
      function testStateDeclarations(event, el) {
        log('âœ“ Testing state declarations...');
        log(`  - count: ${count} (type: ${typeof count})`);
        log(`  - message: "${message}" (type: ${typeof message})`);
        log(`  - score: ${score} (type: ${typeof score})`);
        log('âœ“ All state declarations are registered and accessible');
        
        // Update states to show reactivity
        count++;
        message = 'Updated at ' + new Date().toLocaleTimeString();
        score += 10;
        
        log('âœ“ State values updated - text bindings should update automatically');
      }

      // Initialize logging
      function initLog() {
        log('ðŸš€ Phase 2 Event System & DOM Helpers Test Suite');
        log(
          'All DOM helper methods are ready: show(), hide(), addClass(), removeClass(), setText(), setHTML()'
        );
        log('ðŸš€ Compiler: State Declarations');
        log('State declarations registered at compile time: count, message, score');
        
        // Display state declaration info
        const stateList = document.getElementById('state-list');
        if (stateList) {
          const states = [
            { name: 'count', value: count, type: typeof count },
            { name: 'message', value: message, type: typeof message },
            { name: 'score', value: score, type: typeof score }
          ];
          stateList.innerHTML = states.map(s => 
            `<li><code>state ${s.name} = ${JSON.stringify(s.value)}</code> (${s.type})</li>`
          ).join('');
        }
      }

      // State declarations - registered at compile time
      // These are processed by the compiler and removed from the output
      state count = 0;
      state message = "Hello from compiler!";
      state score = 100;
      state counter = 0;
      state inputValue = "";
    </script>
  </body>
</html>
